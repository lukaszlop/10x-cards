name: "Simple Pipeline Summary"
description: "Simple but effective pipeline status reporting"

inputs:
  test-result:
    description: "Test job result"
    required: true
  build-result:
    description: "Build job result"
    required: true
  e2e-result:
    description: "E2E job result"
    required: true

runs:
  using: "composite"
  steps:
    - name: Pipeline Summary
      run: |
        echo "ğŸ” === Pipeline Summary ==="
        echo "Timestamp: $(date -u +"%H:%M:%S UTC")"
        echo ""

        # Simple status check
        test_result="${{ inputs.test-result }}"
        build_result="${{ inputs.build-result }}"
        e2e_result="${{ inputs.e2e-result }}"

        echo "ğŸ“Š Results:"
        echo "  ğŸ§ª Tests: $test_result"
        echo "  ğŸ—ï¸ Build: $build_result"
        echo "  ğŸ­ E2E: $e2e_result"
        echo ""

        # Check critical jobs (build & e2e)
        if [[ "$build_result" == "success" && "$e2e_result" == "success" ]]; then
          echo "âœ… Pipeline passed - ready to deploy!"

          if [[ "$test_result" != "success" ]]; then
            echo "âš ï¸  Note: Test matrix had some failures (non-blocking)"
          fi

        else
          echo "âŒ Pipeline failed:"
          [[ "$build_result" != "success" ]] && echo "  - Build issues detected"
          [[ "$e2e_result" != "success" ]] && echo "  - E2E test failures"
          echo ""
          echo "ğŸ’¡ Check individual job logs for details"
          exit 1
        fi
      shell: bash
